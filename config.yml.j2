# Конфиг представляет собой список задач (tasks)
# и директорию, для записи результатов (out_dir)
# Каждый task имеет вид
# name: simple # название таска, результат будет иметь вид: ${name}.vtu
# mesh:
#   resolution: 100 # Разрешение нитей, точек/см
#   diameter: 0.5 # толщина нити, см
#   width: 20 # Ширина куска = длина ниток утка
#   weft_density: 1 # Плотность ниток утка, нитей / см
#   length: 50 # Длина куска = длина ниток основы
#   warp_density: 0.5 # Плотность ниток основы, нитей / см
# solver:
#    n_steps: 250 # Число шагов
#    step: 0.1 # размер шага
#    pulse:
#       radius: 5 # Радиус нагрузки
#       amplitude: 1 # Амплитуда нагрузки
#       center: # Точка нагрузки
#          x: 50
#          y: 50
#          z: 0
#
# NOTE: Конфиг поддерживает шаблоны jinja2
---
out_dir: out

tasks:
{% for radius in [1] %}
  {% for amplitude in [0.1] %}
    {% for density in [5] %}
  - name: "density_{{ density }}_radius_{{ radius}}_amplitude_{{ amplitude }}"
    mesh:
      resolution: 1
      diameter: 0.001
      width: 100
      weft_density: !!int "{{ density }}"
      length: 100
      warp_density: !!int "{{ density }}"
    solver:
      step: 0.1
      n_steps: 250
      pulse:
        radius: 5
        amplitude: 1
        center:
          x: 50
          y: 50
          z: 0
    {% endfor %}
  {% endfor %}
{% endfor %}
